<!DOCTYPE html>
<html>
	<body onload="webGLStart();" style="width:100%; height:100%;">
		<center><canvas id="canvas" style="border: none;" width="1024px" height="768px"></canvas><br>
		<input type="range" id="parallax" value="0"><br>
		<input type="radio" name="mode" value="0" checked> Simple parallax<br>
		<input type="radio" name="mode" value="1" > Steep Parallax<br>
		<input type="radio" name="mode" value="2" > Parallax Occlusion<br>
		<input type="checkbox" id="correction" value="1" > sRGB Gamma Correction<br></center>

		<script type="text/javascript" src="gltools.js"></script>
		<script type="text/javascript" src="gl.js"></script>
		<script id="shader-fs" type="x-shader/x-fragment">
			precision highp float;
			varying vec2 texmap;

			void main(void) {
				gl_FragColor = vec4(1.0,0.0,0.0,1.0);
			}
		</script>
		<script id="shader-vs" type="x-shader/x-vertex">
			attribute vec3 aVertexPosition;
			attribute vec2 aVertexTexmap;
			varying vec2 texmap;

			void main(void) {
				texmap=aVertexTexmap;
				gl_Position = vec4(aVertexPosition, 1.0);
			}
		</script>
		<script type="text/javascript">
			"use strict";
			var gl;
			var shaderProgram;
			function initShaders() {
				var fragmentShader = gl.getShader(gl, "shader-fs");
				var vertexShader = gl.getShader(gl, "shader-vs");
				shaderProgram = gl.createProgram();
				gl.attachShader(shaderProgram, vertexShader);
				gl.attachShader(shaderProgram, fragmentShader);
				gl.linkProgram(shaderProgram);
				if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {
					alert("Could not initialise shaders");
				}
				gl.useProgram(shaderProgram);
				shaderProgram.vertexPositionAttribute = gl.getAttribLocation(shaderProgram, "aVertexPosition");
				gl.enableVertexAttribArray(shaderProgram.vertexPositionAttribute);
				shaderProgram.vertexTexmapAttribute = gl.getAttribLocation(shaderProgram, "aVertexTexmap");
				gl.enableVertexAttribArray(shaderProgram.vertexTexmapAttribute);
			}
			function setUniforms() {
			}
			function initBuffers() {
				var vertices = [
					-1.0, -1.0,  0.0,
					1.0, -1.0,  0.0,
					-1.0,  1.0,  0.0,

					1.0, -1.0,  0.0,
					1.0, 1.0,  0.0,
					-1.0,  1.0,  0.0,
				];
				gl.addBuffer(vertices,3,shaderProgram.vertexPositionAttribute);

				var texmap = [
					0.0,0.0,
					1.0,0.0,
					0.0,1.0,

					1.0,0.0,
					1.0,1.0,
					0.0,1.0,
				];
				gl.addBuffer(texmap,2,shaderProgram.vertexTexmapAttribute);
			}
			function drawScene() {
				gl.viewport(0, 0, gl.viewportWidth, gl.viewportHeight);
				gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);

				setUniforms();
				gl.drawBuffers();
			}
			function tick(){
				requestAnimFrame(tick);
				drawScene();
			}
			function webGLStart() {
				gl = initGL(canvas);
				initShaders();
				initBuffers();
				gl.clearColor(0.0, 0.0, 0.0, 1.0);
				gl.enable(gl.CULL_FACE);
				tick();
			}
		</script>

	</body>
</html>
